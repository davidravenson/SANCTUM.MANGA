<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SANCTUM — Pilot</title>

  <style>
    :root{
      --version: "v0.28.1";
      --paper-bg: url("./media/ui/manga_paper_bg.png");
    }

    html,body{
      margin:0;
      height:100%;
      background:#000;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow-x:hidden;
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      z-index:-2;
      background: var(--paper-bg) center/cover no-repeat;
    }

    body::after{
      content:"";
      position:fixed;
      inset:0;
      z-index:-1;
      background: radial-gradient(ellipse at top, rgba(0,0,0,0.65), rgba(0,0,0,0.2));
      pointer-events:none;
    }

    .wrap{
      min-height:100%;
      padding:12px 12px 140px;
      box-sizing:border-box;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:12px;
    }

    .panel{
      width:100%;
      max-width:980px;
      flex:1 1 auto;
      border-radius:18px;
      overflow:hidden;
      background:rgba(255,255,255,0.18);
      box-shadow:0 10px 35px rgba(0,0,0,0.25);
    }

    .panel img{
      width:100%;
      height:auto;
      display:block;
      user-select:none;
      -webkit-user-select:none;
    }

    .soundWrap{
      width:100%;
      max-width:980px;
      background:rgba(255,255,255,0.6);
      border-radius:18px;
      box-shadow:0 10px 35px rgba(0,0,0,0.18);
      padding:10px 12px;
      box-sizing:border-box;
    }

    .trackTop{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
      margin-bottom:8px;
    }

    .trackText{
      color:#000;
      font-weight:800;
      line-height:1.05;
    }
    .trackText span{
      display:block;
      font-weight:600;
      opacity:0.75;
      margin-top:4px;
    }

    .openBtn{
      border:1px solid rgba(0,0,0,0.18);
      background:rgba(255,255,255,0.7);
      color:#000;
      padding:10px 12px;
      border-radius:999px;
      text-decoration:none;
      font-weight:700;
      font-size:13px;
      white-space:nowrap;
    }

    iframe{
      width:100%;
      height:110px;
      border:0;
      border-radius:14px;
      background:#fff;
    }

    .maintenance{
      position:fixed;
      left:10px;
      right:10px;
      bottom:10px;
      z-index:50;
      background:rgba(0,0,0,0.55);
      backdrop-filter:blur(10px);
      border-radius:14px;
      padding:10px 12px;
      color:#fff;
      font-size:12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      box-sizing:border-box;
    }

    .maintenance code{
      opacity:0.9;
    }

    .coverLoader{
      position:fixed;
      inset:0;
      z-index:100;
      background:#000;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:opacity 400ms ease;
    }

    .coverLoader.hide{
      opacity:0;
      pointer-events:none;
    }

    .coverImg{
      position:absolute;
      inset:0;
      background-size:cover;
      background-position:center;
    }

    .coverVeil{
      position:absolute;
      inset:0;
      background:radial-gradient(ellipse at center, rgba(0,0,0,0.15), rgba(0,0,0,0.75));
    }

    .coverLabel{
      position:relative;
      z-index:2;
      color:#fff;
      font-weight:800;
      letter-spacing:0.4px;
      padding:12px 16px;
      border-radius:14px;
      background:rgba(0,0,0,0.45);
      border:1px solid rgba(255,255,255,0.18);
    }
  </style>
</head>

<body>

<!-- COVER / LOADING -->
<div class="coverLoader" id="coverLoader">
  <div class="coverImg" id="coverImg"></div>
  <div class="coverVeil"></div>
  <div class="coverLabel">SANCTUM</div>
</div>

<div class="wrap">

  <div class="panel" id="panelArea">
    <img id="panelImg" alt="SANCTUM panel">
  </div>

  <div class="soundWrap">
    <div class="trackTop">
      <div class="trackText">
        SENTINEL
        <span>DAVID RAVENSON</span>
      </div>
      <a class="openBtn" href="https://soundcloud.com/user-543596862/sentinel-2" target="_blank" rel="noopener">
        SoundCloud
      </a>
    </div>

    <!-- SoundCloud stream -->
    <iframe
      loading="lazy"
      allow="autoplay"
      src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/user-543596862/sentinel-2&auto_play=false&hide_related=true&show_comments=false&show_user=false&show_reposts=false&show_teaser=false&visual=false">
    </iframe>
  </div>

</div>

<div class="maintenance">
  <div>SENTINEL • DAVID RAVENSON</div>
  <code>v0.28.1 · chapter-00 · audio: chapter-00audio</code>
</div>

<script>
/* =========================
   SANCTUM READER v0.28.1
   ========================= */

/* CHAPTER CONFIG */
const CHAPTER = "chapter-00";
const TOTAL_PANELS = 20;

/* ✅ AUDIO PATH (UPDATED, DOCUMENTED) */
const AUDIO_FOLDER = "./media/audio/chapter-00audio/";
const AUDIO_FILE   = "instrumental.mp3";
/* Full path (future use):
   ./media/audio/chapter-00audio/instrumental.mp3
*/

/* PANEL PATH */
const pad2 = n => String(n).padStart(2,"0");
const panelPath = i => `./manga/${CHAPTER}/panel${pad2(i)}.jpg`;
const coverPath = `./manga/${CHAPTER}/cover.jpg`;

const panelImg = document.getElementById("panelImg");
const coverLoader = document.getElementById("coverLoader");
const coverImg = document.getElementById("coverImg");

let panelIndex = 1;

/* Cover loader */
(function(){
  const img = new Image();
  img.onload = () => {
    coverImg.style.backgroundImage = `url('${coverPath}?cb=${Date.now()}')`;
    setTimeout(()=>coverLoader.classList.add("hide"), 650);
  };
  img.onerror = () => {
    setTimeout(()=>coverLoader.classList.add("hide"), 650);
  };
  img.src = `${coverPath}?cb=${Date.now()}`;
})();

/* Render panel */
function render(){
  panelImg.src = panelPath(panelIndex) + `?cb=${Date.now()}`;
}
render();

/* Swipe right = next */
let sx=0, sy=0;
document.getElementById("panelArea").addEventListener("touchstart", e=>{
  if(e.touches.length!==1) return;
  sx=e.touches[0].clientX;
  sy=e.touches[0].clientY;
},{passive:true});

document.getElementById("panelArea").addEventListener("touchend", e=>{
  const dx=e.changedTouches[0].clientX-sx;
  const dy=e.changedTouches[0].clientY-sy;
  if(Math.abs(dx)>40 && Math.abs(dx)>Math.abs(dy)){
    if(dx>0 && panelIndex<TOTAL_PANELS){ panelIndex++; render(); }
    if(dx<0 && panelIndex>1){ panelIndex--; render(); }
  }
},{passive:true});
</script>

</body>
</html>