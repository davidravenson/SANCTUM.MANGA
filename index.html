<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>SANCTUM — Reader</title>

<style>
/* =========================
   SANCTUM Reader v0.29.2
   ========================= */

:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);

  --dock-gap: 14px;
  --dock-h-collapsed: 72px;
  --dock-h-open: 180px;

  --glass: rgba(255,255,255,.14);
  --shadow: 0 16px 40px rgba(0,0,0,.35);
  --ink: #0b0b0b;
}

/* ===== Base ===== */
html, body{
  margin:0;
  padding:0;
  background:#000;
  color:#fff;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  height:100%;
  -webkit-tap-highlight-color: transparent;
}

/* ===== Layout safety: reserve space for player ===== */
body{
  padding-bottom: calc(var(--dock-h-collapsed) + var(--dock-gap) + var(--safe-bottom));
}

body.player-open{
  padding-bottom: calc(var(--dock-h-open) + var(--dock-gap) + var(--safe-bottom));
}

/* ===== Panel / Reader ===== */
.reader{
  max-width: 900px;
  margin: 0 auto;
  padding-top: var(--safe-top);
}

.reader img{
  width:100%;
  height:auto;
  display:block;
}

/* ===== Player Dock ===== */
#playerDock{
  position: fixed;
  left: 12px;
  right: 12px;
  bottom: calc(var(--dock-gap) + var(--safe-bottom));
  z-index: 50;
}

/* Player shell */
.player{
  background: var(--glass);
  backdrop-filter: blur(12px);
  border-radius: 18px;
  box-shadow: var(--shadow);
  overflow: hidden;
  transition: max-height .35s ease, padding .35s ease;
  max-height: var(--dock-h-collapsed);
  padding: 14px;
}

/* Expanded state */
.player.open{
  max-height: var(--dock-h-open);
}

/* Controls */
.controls{
  display:flex;
  align-items:center;
  gap:14px;
}

.play-btn{
  width:44px;
  height:44px;
  border-radius:50%;
  border:none;
  background:#fff;
  color:#000;
  font-size:18px;
  cursor:pointer;
}

.track-info{
  flex:1;
  opacity:.85;
  font-size:.9rem;
}

/* Hidden area when collapsed */
.extra{
  margin-top:14px;
  opacity:0;
  pointer-events:none;
  transition: opacity .25s ease;
}

.player.open .extra{
  opacity:1;
  pointer-events:auto;
}
</style>
</head>

<body>

<!-- ===== Reader Panel ===== -->
<div class="reader">
  <!-- PANEL IMAGE -->
  <img src="./manga/my-series/chapter-1/001.jpg" alt="SANCTUM Panel">
</div>

<!-- ===== Player Dock ===== -->
<div id="playerDock">
  <div class="player" id="player">
    <div class="controls">
      <button class="play-btn" id="playBtn">▶</button>
      <div class="track-info">
        David Ravenson — <b>SENTINEL</b>
      </div>
    </div>

    <div class="extra">
      <input type="range" min="0" max="1" step="0.01" id="volume" value="0.6">
    </div>

    <audio id="audio" preload="metadata">
      <source src="./audio/sentinel_instrumental.mp3" type="audio/mpeg">
    </audio>
  </div>
</div>

<script>
/* =========================
   Player Logic v0.29.2
   ========================= */

const player   = document.getElementById('player');
const audio    = document.getElementById('audio');
const playBtn  = document.getElementById('playBtn');
const volume   = document.getElementById('volume');

let isOpen = false;
let started = false;

/* Fade-in helper */
function fadeInAudio(){
  audio.volume = 0;
  audio.play();
  let v = 0;
  const fade = setInterval(()=>{
    v += 0.02;
    audio.volume = Math.min(v, volume.value);
    if(v >= volume.value) clearInterval(fade);
  }, 50);
}

/* Toggle player */
playBtn.addEventListener('click', ()=>{
  isOpen = !isOpen;
  player.classList.toggle('open', isOpen);
  document.body.classList.toggle('player-open', isOpen);

  if(!started){
    started = true;
    fadeInAudio();
  }else{
    audio.paused ? audio.play() : audio.pause();
  }

  playBtn.textContent = audio.paused ? '▶' : '⏸';
});

/* Volume */
volume.addEventListener('input', e=>{
  audio.volume = e.target.value;
});
</script>

</body>
</html>