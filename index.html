<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SANCTUM — Reader</title>

  <style>
    :root{
      --v: "v0.29.7";
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);

      --bg: url("./media/ui/manga_paper_bg.png");
      --ink: #0b0b0b;
      --shadow: 0 16px 40px rgba(0,0,0,.35);
    }

    html, body{
      height:100%;
      margin:0;
      background:#000;
      color:#fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      -webkit-tap-highlight-color: transparent;
      overflow-x:hidden;
    }

    body{
      min-height: 100vh;
      min-height: 100svh;
      min-height: 100dvh;
      background-image: var(--bg);
      background-size: cover;
      background-position: center top;
      background-repeat: no-repeat;
      background-attachment: fixed;
      overscroll-behavior: none;
      touch-action: pan-y;
    }

    html.ios body{
      background-attachment: scroll;
    }

    .page{
      min-height:100vh;
      min-height:100svh;
      min-height:100dvh;
      display:flex;
      flex-direction:column;
      align-items:center;
    }

    .stage{
      position:relative;
      width:100%;
      max-width: 860px;
      padding-top: var(--safe-top);
      padding-bottom: 12px;
      display:flex;
      justify-content:center;
      align-items:center;
    }

    .panelShell{
      position:relative;
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
    }

    .panelImg{
      width: min(100vw, 860px);
      height:auto;
      display:block;
      background:#000;
      user-select:none;
      -webkit-user-select:none;
      -webkit-user-drag:none;
    }

    .playerDock{
      position:absolute;
      left:50%;
      bottom:-26px;
      transform: translateX(-50%);
      z-index:20;
      transition: transform .25s ease;
    }
    .playerDock.shiftDown{
      transform: translateX(-50%) translateY(200px);
    }

    .player{
      width:78px;
      height:78px;
      border-radius:999px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      overflow:hidden;
      transition: width .28s ease, height .28s ease, border-radius .28s ease;
      position:relative;
    }

    .player .meta,
    .player .embedWrap,
    .player .openBtn,
    .player .closeBtn{ display:none; }

    .playerBtn{
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
    }

    .playIcon{
      width:0;height:0;
      border-top:12px solid transparent;
      border-bottom:12px solid transparent;
      border-left:18px solid rgba(0,0,0,.92);
      transform: translateX(2px);
    }

    .player.expanded{
      width: min(92vw, 640px);
      height: 240px;
      border-radius: 22px;
      background: rgba(255,255,255,.12);
    }
    .player.expanded .meta,
    .player.expanded .embedWrap,
    .player.expanded .openBtn,
    .player.expanded .closeBtn{ display:block; }
    .player.expanded .playerBtn{ display:none !important; }

    .meta{
      position:absolute;
      left:12px; top:14px; right:180px;
      background: rgba(255,255,255,.75);
      border-radius:14px;
      padding:10px 12px;
      color:#0d0d0d;
    }
    .meta .t{ font-weight:900;font-size:18px; }
    .meta .a{ font-weight:700;font-size:13px; }

    .openBtn{
      position:absolute;
      top:16px; right:54px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.22);
      color:#fff;
      text-decoration:none;
      font-weight:700;
    }

    .closeBtn{
      position:absolute;
      top:16px; right:12px;
      width:36px; height:36px;
      border-radius:999px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.22);
      color:#fff;
      font-size:18px;
      line-height:34px;
      text-align:center;
      cursor:pointer;
    }

    .embedWrap{
      position:absolute;
      left:10px; right:10px; bottom:10px; top:82px;
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.18);
    }
    .embedWrap iframe{ width:100%; height:100%; border:0; }

    .loading{
      position:fixed;
      inset:0;
      z-index:9999;
      display:flex;
      justify-content:center;
      padding-top: var(--safe-top);
      background: rgba(0,0,0,.08);
      transition: opacity .35s ease;
    }
    .loading::before{
      content:"";
      position:absolute;
      inset:0;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }

    .coverBanner{
      width:min(92vw,520px);
      box-shadow:0 30px 70px rgba(0,0,0,.55);
    }
    .coverBanner img{ width:100%; display:block; }

    .bottomSpacer{ height:360px; width:100%; }

    .maint{
      position:fixed;
      left:50%;
      bottom: calc(10px + var(--safe-bottom));
      transform: translateX(-50%);
      width:min(92vw,720px);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease;
      z-index:50;
    }
    .maint.show{
      opacity:1;
      pointer-events:auto;
    }

    .maintBox{
      background: rgba(0,0,0,.4);
      border:1px solid rgba(255,255,255,.16);
      border-radius:18px;
      padding:12px 14px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      font-size:14px;
    }
    .ok{ color:#7CFF9A;font-weight:800; }
    .warn{ color:#FFD77C;font-weight:800; }
    .err{ color:#FF7C7C;font-weight:800; }
  </style>
</head>

<body>

<div id="loading" class="loading">
  <div class="coverBanner">
    <img src="./manga/chapter-00/cover.jpg" alt="SANCTUM cover">
  </div>
</div>

<div class="page">
  <div class="stage">
    <div class="panelShell">
      <img id="panelImg" class="panelImg"
        src="./manga/chapter-00/panel01.jpg" alt="Panel 01">

      <div id="playerDock" class="playerDock">
        <div id="player" class="player">
          <div id="playerBtn" class="playerBtn"><div class="playIcon"></div></div>
          <div class="meta"><div class="t">SENTINEL</div><div class="a">DAVID RAVENSON</div></div>
          <a class="openBtn" href="https://soundcloud.com/user-543596862/sentinel-2" target="_blank">SoundCloud</a>
          <div id="closeBtn" class="closeBtn">×</div>
          <div class="embedWrap">
            <iframe id="scFrame"
              src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/user-543596862/sentinel-2&auto_play=false&hide_related=true&show_comments=false&show_user=true&show_reposts=false&visual=true"
              allow="autoplay"></iframe>
          </div>
        </div>
      </div>

    </div>
  </div>
  <div class="bottomSpacer"></div>
</div>

<div id="maint" class="maint">
  <div class="maintBox">
    <div>v0.29.7</div>
    <div>SC: <span id="dbgSc" class="warn">…</span></div>
    <div>READY: <span id="dbgReady" class="warn">…</span></div>
    <div>PLAY_REQ: <span id="dbgReq" class="warn">…</span></div>
    <div>LAST: <span id="dbgLast" class="warn">…</span></div>
  </div>
</div>

<script src="https://w.soundcloud.com/player/api.js"></script>
<script>
(function(){
  const loading=document.getElementById("loading");
  const panelImg=document.getElementById("panelImg");
  const maint=document.getElementById("maint");

  if(panelImg.complete) setTimeout(()=>loading.style.opacity=0,550);
  panelImg.onload=()=>setTimeout(()=>loading.style.opacity=0,550);

  /* >>> SANFTER TRIGGER <<< */
  const SHOW_Y = 240;   // vorher 560

  window.addEventListener("scroll",()=>{
    if(window.scrollY>SHOW_Y) maint.classList.add("show");
    else maint.classList.remove("show");
  },{passive:true});
})();
</script>

</body>
</html>