<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SANCTUM — Reader</title>

  <style>
    :root{
      --v: "v0.29.3";
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);

      --bg: url("./media/ui/manga_paper_bg.png");
      --shadow: 0 16px 40px rgba(0,0,0,.35);

      --cine-top: clamp(10px, 2.2vh, 22px);
      --cine-bottom: clamp(14px, 2.8vh, 30px);

      --stage-max: 860px;
      --player-overlap: 26px;
      --player-shift: 200px;
    }

    html, body{
      height:100%;
      margin:0;
      background:#000;
      color:#fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow-x:hidden;
      -webkit-tap-highlight-color: transparent;
    }

    body{
      background-image: var(--bg);
      background-size: cover;
      background-position: center top;
      background-repeat: no-repeat;
      background-attachment: fixed;
      overscroll-behavior: none;
      touch-action: pan-y;
    }

    .page{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
    }

    .stage{
      width:100%;
      max-width: var(--stage-max);
      padding-top: calc(var(--safe-top) + 8px);
      display:flex;
      justify-content:center;
    }

    .panelShell{
      position:relative;
      width:100%;
    }

    .cineFrame{
      background:#000;
      padding-top: var(--cine-top);
      padding-bottom: var(--cine-bottom);
    }

    .panelImg{
      width:100%;
      display:block;
      background:#000;
      cursor:pointer;
    }

    /* PLAYER */
    .playerDock{
      position:absolute;
      left:50%;
      bottom: calc(var(--cine-bottom) - var(--player-overlap));
      transform: translateX(-50%);
      z-index:20;
      transition: transform .35s ease;
    }

    .playerDock.shifted{
      transform: translateX(-50%) translateY(var(--player-shift));
    }

    .player{
      width:72px;
      height:72px;
      border-radius:999px;
      background: rgba(255,255,255,.1);
      border:1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      transition: width .28s ease, height .28s ease, border-radius .28s ease;
      overflow:hidden;
    }

    .player .meta,
    .player .embedWrap,
    .player .openBtn{
      display:none;
    }

    .playerBtn{
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
    }

    .playIcon{
      width:0;height:0;
      border-top:12px solid transparent;
      border-bottom:12px solid transparent;
      border-left:18px solid rgba(255,255,255,.95);
      transform: translateX(2px);
    }

    .player.expanded{
      width:min(92vw,640px);
      height:240px;
      border-radius:18px;
    }

    .player.expanded .meta,
    .player.expanded .embedWrap,
    .player.expanded .openBtn{
      display:block;
    }

    .player.expanded .playerBtn{
      position:absolute;
      left:10px;
      top:10px;
      width:52px;
      height:52px;
      background: rgba(0,0,0,.3);
      border-radius:999px;
      border:1px solid rgba(255,255,255,.2);
    }

    .meta{
      position:absolute;
      left:74px;
      top:12px;
      right:140px;
      background: rgba(255,255,255,.78);
      color:#000;
      border-radius:14px;
      padding:10px 12px;
      font-weight:800;
    }

    .meta .a{
      font-size:13px;
      font-weight:700;
      opacity:.85;
    }

    .openBtn{
      position:absolute;
      top:14px;
      right:12px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.25);
      color:#fff;
      font-weight:700;
      text-decoration:none;
    }

    .embedWrap{
      position:absolute;
      left:10px;
      right:10px;
      bottom:10px;
      top:80px;
      border-radius:16px;
      overflow:hidden;
    }

    .embedWrap iframe{
      width:100%;
      height:100%;
      border:0;
    }

    .bottomSpacer{
      height:260px;
      width:100%;
    }

    /* LOADING */
    .loading{
      position:fixed;
      inset:0;
      z-index:9999;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding-top: var(--safe-top);
      background: rgba(0,0,0,.1);
      transition: opacity .35s ease;
    }

    .loading::before{
      content:"";
      position:absolute;
      inset:0;
      backdrop-filter: blur(14px);
      background: rgba(0,0,0,.1);
    }

    .coverBanner{
      width:min(92vw,520px);
      box-shadow:0 30px 70px rgba(0,0,0,.55);
    }

    .coverBanner img{
      width:100%;
      display:block;
    }
  </style>
</head>

<body>

<!-- LOADING -->
<div id="loading" class="loading">
  <div class="coverBanner">
    <img src="./manga/chapter-00/cover.jpg" alt="SANCTUM cover">
  </div>
</div>

<div class="page">
  <div class="stage">
    <div class="panelShell">

      <div class="cineFrame">
        <img
          id="panelImg"
          class="panelImg"
          src="./manga/chapter-00/panel01.jpg"
          alt="Panel 01"
        >
      </div>

      <div id="playerDock" class="playerDock">
        <div id="player" class="player">

          <div id="playerBtn" class="playerBtn">
            <div class="playIcon"></div>
          </div>

          <div class="meta">
            <div>SENTINEL</div>
            <div class="a">DAVID RAVENSON</div>
          </div>

          <a class="openBtn"
             href="https://soundcloud.com/user-543596862/sentinel-2"
             target="_blank">SoundCloud</a>

          <div class="embedWrap">
            <iframe
              allow="autoplay"
              src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/user-543596862/sentinel-2&auto_play=false&hide_related=true&show_comments=false&show_user=true&show_reposts=false&show_teaser=false">
            </iframe>
          </div>

        </div>
      </div>

    </div>
  </div>

  <div class="bottomSpacer"></div>
</div>

<script>
(function(){
  const loading = document.getElementById("loading");
  const panelImg = document.getElementById("panelImg");
  const player = document.getElementById("player");
  const playerBtn = document.getElementById("playerBtn");
  const playerDock = document.getElementById("playerDock");

  // Hide loading once panel is ready
  panelImg.onload = () => {
    setTimeout(() => {
      loading.style.opacity = "0";
      setTimeout(() => loading.remove(), 400);
    }, 500);
  };

  // Toggle player
  playerBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    player.classList.toggle("expanded");
    playerDock.classList.remove("shifted");
  });

  // Tap panel → move expanded player down
  panelImg.addEventListener("click", () => {
    if(player.classList.contains("expanded")){
      playerDock.classList.toggle("shifted");
    }
  });

})();
</script>

</body>
</html>