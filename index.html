<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SANCTUM â€” Reader</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: #000;
    overflow: hidden;
  }

  #viewer {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #page {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    display: block;
  }
</style>
</head>

<body>

<div id="viewer">
  <img id="page" src="" alt="Manga Page">
</div>

<script>
/* =========================
   SANCTUM Reader v0.14.18
   Minimal single-page reader
========================= */

const folder = "./manga/my-series/chapter-1/";
const totalPages = 60;
const ext = "jpg";
const pad = 3;

let page = 1;
const img = document.getElementById("page");

function z(n){
  return String(n).padStart(pad, "0");
}

function render(){
  img.src = folder + z(page) + "." + ext;
}

function next(){
  if (page < totalPages){
    page++;
    render();
  }
}

function prev(){
  if (page > 1){
    page--;
    render();
  }
}

/* Touch swipe */
let startX = 0;
let startY = 0;

document.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
  startY = e.touches[0].clientY;
}, { passive: true });

document.addEventListener("touchend", e => {
  const dx = e.changedTouches[0].clientX - startX;
  const dy = e.changedTouches[0].clientY - startY;

  if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 40) {
    dx < 0 ? next() : prev();
  }
}, { passive: true });

/* Keyboard */
document.addEventListener("keydown", e => {
  if (e.key === "ArrowRight") next();
  if (e.key === "ArrowLeft") prev();
});

/* Init */
render();
</script>

</body>
</html>