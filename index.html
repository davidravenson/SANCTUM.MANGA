<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>SANCTUM — Reader Core</title>

<style>
/* ── unverändert: Styles exakt wie v0.40.2 ── */
</style>
</head>

<body>
<!-- ── unverändert: HTML-Struktur exakt wie v0.40.2 ── -->

<script>
(function(){
  const VERSION = "v0.40.3";

  /* ── Konfig & Setup unverändert ── */

  /* ===========================
     TOUCH / SWIPE
     =========================== */

  function onEnd(){
    if(!dragging) return;
    dragging = false;
    track.classList.remove("dragging");

    if(refreshFired) return;

    if(lockedAxis === "y"){
      hideRefresh();
      return;
    }

    const dx = lastX - startX;

    /* ✅ KORRIGIERTE LOGIK
       Finger nach LINKS  (dx negativ) → NÄCHSTE Seite
       Finger nach RECHTS (dx positiv) → VORHERIGE Seite
    */
    if(dx < -READER.swipeThresholdPx){
      setIndex(index + 1, true);
    }else if(dx > READER.swipeThresholdPx){
      setIndex(index - 1, true);
    }else{
      setIndex(index, true);
    }
  }

  /* ── Rest des Scripts unverändert ── */

  console.log("SANCTUM", VERSION);
})();
</script>
</body>
</html>