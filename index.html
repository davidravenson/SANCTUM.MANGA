<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SANCTUM — Pilot</title>

<style>
  html,body{
    margin:0; padding:0; height:100%;
    background:#000; color:#fff;
    font-family:system-ui,sans-serif;
    touch-action:auto;
  }

  .ver{
    position:fixed; top:8px; right:10px;
    font-size:11px; opacity:.55;
    font-family:ui-monospace,monospace;
    pointer-events:none;
  }

  .wrap{
    min-height:100%;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:14px;
    padding:12px;
    box-sizing:border-box;
  }

  .panel{
    width:100%;
    max-width:900px;
    position:relative;
    background:rgba(0,0,0,.15);
  }
  .panel img{
    width:100%;
    display:block;
    background:#000;
  }

  .hud{
    position:absolute;
    left:12px; bottom:12px;
    font-size:12px;
    background:rgba(0,0,0,.6);
    padding:7px 10px;
    border-radius:10px;
    opacity:0;
    white-space:pre-line;
    max-width:calc(100% - 24px);
    pointer-events:none;
    transition:opacity 160ms ease;
  }
  .hud.on{ opacity:.92; }

  .toolbar{
    width:100%;
    max-width:900px;
    display:flex;
    flex-direction:column;
    gap:10px;
    padding:12px;
    background:rgba(20,20,20,.72);
    border:1px solid rgba(255,255,255,.12);
    border-radius:16px;
    box-sizing:border-box;
  }

  .toprow{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }

  .track{
    font-size:13px;
    line-height:1.25;
    white-space:pre-line;
    opacity:.92;
  }

  .scLink{
    font-size:12px;
    opacity:.85;
    text-decoration:none;
    color:#fff;
    border:1px solid rgba(255,255,255,.14);
    padding:6px 10px;
    border-radius:999px;
  }
  .scLink:active{ opacity:1; }

  .playerWrap{
    overflow:hidden;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.10);
    background:rgba(0,0,0,.35);
  }

  .playerWrap iframe{
    width:100%;
    height:92px;
    border:0;
    display:block;
  }
</style>
</head>

<body>
<div class="ver">v0.16</div>

<div class="wrap">

  <div class="panel" id="panel">
    <img id="img" src="manga/chapter-00/panel01.jpg" alt="Panel 01">
    <div class="hud on" id="hud">Ready.\nSwipe right to continue.</div>
  </div>

  <div class="toolbar">
    <div class="toprow">
      <div class="track">Sentinel 2 (SoundCloud)\n— Artist</div>
      <a class="scLink"
         href="https://soundcloud.com/user-543596862/sentinel-2"
         target="_blank" rel="noopener noreferrer">
        Open on SoundCloud
      </a>
    </div>

    <div class="playerWrap" aria-label="SoundCloud player">
      <iframe
        scrolling="no"
        allow="autoplay"
        src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/user-543596862/sentinel-2&color=%23000000&auto_play=false&hide_related=true&show_comments=false&show_user=true&show_reposts=false&show_teaser=false&visual=false">
      </iframe>
    </div>
  </div>

</div>

<script>
  // =========================
  // v0.16 — Panels (simple placeholder)
  // =========================
  const panel = document.getElementById("panel");
  const img = document.getElementById("img");
  const hud = document.getElementById("hud");

  function showHud(msg, ms=1200){
    hud.textContent = msg;
    hud.classList.add("on");
    if (ms > 0){
      clearTimeout(showHud._t);
      showHud._t = setTimeout(()=>hud.classList.remove("on"), ms);
    }
  }

  let panelIndex = 1;
  const TOTAL_PANELS = 20;

  // panel01.jpg ... panel20.jpg
  function panelFile(i){
    return `manga/chapter-00/panel${String(i).padStart(2,"0")}.jpg`;
  }

  function setPanel(){
    img.src = panelFile(panelIndex);
    showHud(`Panel ${panelIndex} / ${TOTAL_PANELS}`, 1200);
  }

  let isPinching=false, sx=0, sy=0, t0=0;

  panel.addEventListener("touchstart",(e)=>{
    if (e.touches.length >= 2){ isPinching=true; return; }
    isPinching=false;
    const t = e.touches[0];
    sx=t.clientX; sy=t.clientY; t0=Date.now();
  }, {passive:true});

  panel.addEventListener("touchmove",(e)=>{
    if (e.touches.length >= 2) isPinching=true;
  }, {passive:true});

  panel.addEventListener("touchend",(e)=>{
    if (isPinching) return;
    const t = e.changedTouches[0];
    const dx=t.clientX-sx;
    const dy=t.clientY-sy;
    const dt=Date.now()-t0;

    if (Math.abs(dx)>40 && Math.abs(dx)>Math.abs(dy)*1.2 && dt<700){
      // RIGHT swipe => next (continue)
      if (dx > 0 && panelIndex < TOTAL_PANELS) panelIndex++;
      // LEFT swipe => previous
      if (dx < 0 && panelIndex > 1) panelIndex--;
      setPanel();
    }
  }, {passive:true});

  panel.addEventListener("click", ()=> showHud(`Panel ${panelIndex} / ${TOTAL_PANELS}`, 1200));
</script>

</body>
</html>