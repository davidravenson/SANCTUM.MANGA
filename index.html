<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SANCTUM — Pilot</title>

<style>
  :root{
    --paper-bg: url("./media/ui/manga_paper_bg.png");
  }

  html,body{
    margin:0; padding:0;
    min-height:100%;
    color:#fff;
    font-family:system-ui,sans-serif;
    background:#000;
  }

  body{
    background-image: var(--paper-bg);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }

  .wrap{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    padding:16px;
    box-sizing:border-box;
  }

  .stage{
    width:100%;
    max-width:900px;
    min-height:60vh;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:24px;
    box-sizing:border-box;

    border-radius:18px;
    background:rgba(0,0,0,.25);
    border:1px solid rgba(255,255,255,.12);
    backdrop-filter: blur(8px);
  }

  .title{
    font-size:clamp(28px,6vw,56px);
    letter-spacing:.08em;
    margin-bottom:14px;
  }

  .subtitle{
    font-size:14px;
    opacity:.85;
    letter-spacing:.12em;
    text-transform:uppercase;
  }

  .small{
    margin-top:18px;
    font-size:13px;
    opacity:.7;
    max-width:520px;
    line-height:1.5;
  }

  .glitch{
    font-family:ui-monospace,monospace;
    letter-spacing:.18em;
    opacity:.85;
  }

  .panel{
    width:100%;
    max-width:900px;
    border-radius:14px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(0,0,0,.08);
  }

  .panel img{
    width:100%;
    display:block;
  }

  .hint{
    margin-top:14px;
    font-size:12px;
    opacity:.6;
  }
</style>
</head>

<body>

<div class="wrap" id="wrap">

  <!-- CONTENT IS INJECTED BY JS -->

</div>

<script>
/* ===========================
   SANCTUM v0.27 — INTRO SEQUENCE
   =========================== */

const wrap = document.getElementById("wrap");

/* ----- Intro Pages (1–4) ----- */
const introPages = [

  {
    type: "intro",
    html: `
      <div class="stage">
        <div>
          <div class="title">SANCTUM</div>
          <div class="subtitle">Chapter 00 · Pilot</div>
          <div class="small">
            A sealed threshold.<br>
            Some stories ask to be entered slowly.
          </div>
        </div>
      </div>
      <div class="hint">Swipe right or tap</div>
    `
  },

  {
    type: "intro",
    html: `
      <div class="stage">
        <div>
          <div class="subtitle">FIELD NOTE</div>
          <div class="small">
            Archive Entry: CH-00<br>
            Status: Unlocked<br>
            Medium: Sequential Image · Sound
          </div>
        </div>
      </div>
      <div class="hint">Continue</div>
    `
  },

  {
    type: "intro",
    html: `
      <div class="stage">
        <div>
          <div class="glitch">TETHER // SIGNAL STABLE</div>
          <div class="small">
            Connection established.<br>
            Memory stream aligned.
          </div>
        </div>
      </div>
      <div class="hint">Proceed</div>
    `
  },

  {
    type: "intro",
    html: `
      <div class="stage">
        <div>
          <div class="small">
            Some doors do not open by force.<br>
            They respond to attention.
          </div>
        </div>
      </div>
      <div class="hint">Begin</div>
    `
  }
];

/* ----- Panel Config ----- */
const TOTAL_PANELS = 20;
let panelIndex = 1;

/* ----- State ----- */
let pageIndex = 0;
const totalPages = introPages.length + TOTAL_PANELS;

/* ----- Render ----- */
function render(){
  wrap.innerHTML = "";

  if(pageIndex < introPages.length){
    wrap.insertAdjacentHTML("beforeend", introPages[pageIndex].html);
  } else {
    const realIndex = pageIndex - introPages.length + 1;
    const img = document.createElement("img");
    img.src = "manga/chapter-00/panel" + String(realIndex).padStart(2,"0") + ".jpg";

    const panel = document.createElement("div");
    panel.className = "panel";
    panel.appendChild(img);

    wrap.appendChild(panel);
    wrap.insertAdjacentHTML("beforeend",
      `<div class="hint">Panel ${realIndex} / ${TOTAL_PANELS}</div>`
    );
  }
}

/* ----- Navigation ----- */
function next(){
  if(pageIndex < totalPages - 1){
    pageIndex++;
    render();
  }
}

let startX = 0;

document.addEventListener("touchstart", e=>{
  startX = e.touches[0].clientX;
},{passive:true});

document.addEventListener("touchend", e=>{
  const dx = e.changedTouches[0].clientX - startX;
  if(dx > 40) next();
},{passive:true});

document.addEventListener("click", next);

/* ----- Init ----- */
render();

</script>

</body>
</html>